<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<link rel="stylesheet" href="style_panel.css">
<title>設定 - クライアントの挙動</title>
</head>
<body>

<font size=5>クライアントの挙動</font>
<hr>

<h3>共通設定</h3>

<dl><dt><b>
クライアントの出力を記録する
</b></dt><dd>&nbsp
GUI によるコマンドとクライアントからの出力結果を記録することができます。
PAR クライアントをコマンド・プロンプト上で使う際の参考にしたり、エラー発生時の検証に使えます。
記録は「<tt>save</tt>」フォルダ内の「<tt>MultiPar.log</tt>」というテキスト・ファイルに保存されます。
ちなみに、作成や検査画面で進行状況をダブル・クリックするとそのフォルダが開かれます。
記録ファイルが大きくなると、次の出力は別の記録ファイル「<tt>MultiPar.#.log</tt>」に保存されるようになります。
記録が不要になったり数が増えたら、自分で削除してください。
</dd></dl>

<dl><dt><b>
消去する
</b></dt><dd>&nbsp
全ての記録ファイルを一度に削除したい時は、このボタンを押してください。
</dd></dl>

<dl><dt><b>
クライアントの優先度を下げる
</b></dt><dd>&nbsp
MultiPar が動作してるとパソコン全般の操作が非常に重くなる症状がでたら、
ここにチェックを入れるといいかもしれません。
MultiPar が裏で動いてる間に、同じパソコンで他の作業をしたい時に役立ちます。
</dd></dl>

<dl><dt><b>
他の作業が終わるのを待たない
</b></dt><dd>&nbsp
複数起動された MultiPar を同時に動かしたい時だけ、ここにチェックを入れてください。
作成や修復を同時に行うと、ディスク・アクセスが混雑したり、
メモリー消費量が倍増するので、順番に作業するより遅くなるかもしれません。
</dd></dl>

<hr>

<h3>作成時の設定</h3>

<dl><dt><b>
リカバリ・ファイルの形式
</b></dt><dd>&nbsp
ここでは PAR ファイルを新たに作成する際の仕様バージョンを選択します。
普通は PAR 2.0 を使ってください。
ソース・ファイルがほとんど同じ大きさなら、PAR 1.0 を使ってもいいです。
<!--今のところ PAR 3.0 は新技術の実験目的のためにだけ使うようにしてください。-->
</dd></dl>

<dl><dt><b>
冗長性の指定範囲
</b></dt><dd>&nbsp
作成画面で冗長性をスライダーで指定する際の範囲を変えることができます。
リカバリ・ブロックの数を直接指定する際は、この範囲に関係無く指定することができます。
</dd></dl>

<dl><dt><b>
常にフォルダ名を基準ファイル名にする
</b></dt><dd>&nbsp
リカバリ・ファイルの基準ファイル名は、自分でファイル名を入力しない限り、
ソース・ファイルを選択した時に自動的に設定されます。
この名前の付け方は QuickPar と同じで、ファイルが一個だけならそのファイル名、
ファイルが複数ならファイル名先頭の共通部分、共通する部分が無ければ親ディレクトリのフォルダ名になります。
しかし、ここにチェックを入れると、
ソース・ファイルのファイル数やファイル名に関係なく、常にフォルダ名が使われるようになります。
</dd></dl>

<dl><dt><b>
下層フォルダ内を検索しない
</b></dt><dd>&nbsp
フォルダが階層になってる際、全てのフォルダ内のファイルが標準で検索されます。
下層フォルダを無視したいなら、ここにチェックを入れてください。
チェックした場合でも、手動で下層のファイルを追加できます。
</dd></dl>

<dl><dt><b>
インデックス・ファイルを作らない
</b></dt><dd>&nbsp
検査専用のファイルが必要ないなら、ここにチェックを入れてください。
リカバリ・ファイルの合計サイズがちょっとだけ小さくなります。
</dd></dl>

<hr>

<h3>検査と修復時の設定</h3>

<dl><dt><b>
検査対象ファイルを監視する
</b></dt><dd>&nbsp
ここにチェックを入れると、最初の検査後にリカバリ・ファイルとソース・ファイルを監視するようになります。
新しいファイルを追加したり、ファイル内容を修正したりすると、自動的に再検査が行われます。
ただし、検査中にエラーが発生したり、ファイルが最初から完全だったり、修復が成功した場合は、
それ以降の監視は行われません。
また、監視中に「<b>Escape</b>」キーを押すと、監視を中止します。
その後、監視を再開するには「検査する」ボタンをクリックするか「F5」キーを押してください。
</dd></dl>

<dl><dt><b>
自動的に修復を開始する
</b></dt><dd>&nbsp
初期状態では MultiPar はリカバリ・ファイルを開いた際に検査だけして、
破損していても勝手に修復を始めたりしません。
ここにチェックを入れると、検査後にブロック数が足りていれば自動的に修復も行います。
「修復する」ボタンをクリックする手間が省けて便利かもしれません。
「F5」キーやファイルが追加されたり監視機能が有効になってる場合の検査後も、自動的に修復されます。
ただし、部分的な修復はできそうでも、完全な復元が無理な場合は、修復しません。
</dd></dl>

<a name="verification_level"></a>
<dl><dt><b>
検査の程度
</b></dt><dd>&nbsp
普通は「<b>詳細検査</b>」にしておいてください。
破損ファイル内でデータの削除や挿入が無い場合は「<b>簡易検査</b>」の方が速いです。
「<b>追加検査</b>」は基準ディレクトリ直下のファイル全てを検査するので、
ファイル数やサイズによっては極端に遅くなります。
破損ファイルの名前が異なる場合やソース・ファイルが ISO イメージなどの無圧縮書庫に含まれる場合は、
「追加検査」にすれば自動的に追加されます。
「<b>順列検査</b>」は最速ですが、破損ファイルがバックアップされません。
破損ファイルに直接上書きするので、修復に失敗した際にデータが失われる危険性があります。
</dd></dl>

<a name="reuse_result"></a>
<dl><dt><b>
検査結果を再利用する
</b></dt><dd>&nbsp
ここで期間を指定すると、リカバリ・ファイルを開いた時に検査結果を記録して、
「修復する」ボタンを押した際にそれを再利用することで高速化されます。
標準設定 (<b>しばらくの間</b>) では、GUI を閉じるまで記録が維持されます。
それより長い期間 (<b>何日間</b>) では、その期間の間は記録が維持されます。
検査結果はリカバリ・セットごとに「<tt>save</tt>」フォルダ内の「<tt>****.bin</tt>」や「<tt>****.ini</tt>」というファイルに保存されます。
<b>注意点</b>として、この機能によってファイルの<b>過去の状態</b>が表示されるので、
<b>現在の状態</b>を確認したいなら「F5」キーを押して、再度検査しなおしてください。
指定した期間より古い記録は削除されますが、ファイル数や大きさの制限は無いので、
期間を長く設定する際は空き容量に注意してください。
</dd></dl>

<p>&nbsp
再利用機能の設定による違い:<br>
<center><table border=1 cellspacing=0 cellpadding=2 width="98%">
<tr bgcolor="E0F0E0"><th rowspan=2>アプリケーションと設定<th colspan=3>MultiPar<th rowspan=2>QuickPar<br>(参考として)
<tr bgcolor="E0F0E0"><th>利用しない<th>しばらくの間 (標準)<th>何日間
<tr><td>リカバリ・ファイルを開いた時<td colspan=2 bgcolor="E0E0FF">新たに検査する<td colspan=2 bgcolor="FFE0E0">前回の検査結果を再利用する
<tr><td>修復ボタンを押した時、<br>
または、新しいファイルを追加した時
<td bgcolor="E0E0FF">新たに検査しなおす<td colspan=3 bgcolor="FFE0E0">前回の検査結果を再利用する
<tr><td>再検査する為に F5 キーを押した時<td colspan=4 bgcolor="E0E0FF">新たに検査しなおす
</table></center>
</p>

<dl><dt><b>
下層フォルダ内を検索しない
</b></dt><dd>&nbsp
ソース・ファイルが存在しない場合は、フォルダ内で別名または移動されたファイルを自動的に探します。
探索には時間が掛かるので、下層フォルダを無視したいなら、ここにチェックを入れてください。
</dd></dl>

<hr>

<h3>PAR2 の設定</h3>

<dl><dt><b>
UTF-16 のファイル名も追加で記録する
</b></dt><dd>&nbsp
MultiPar は PAR 2.0 仕様の「Unicode Filename packet」(UTF-16 形式のファイル名) に対応してます。
英数文字以外をファイル名に使っていて、
この機能に対応した他の PAR2 クライアントを使ってる人に PAR2 ファイルを送るときだけ、
ここにチェックを入れてください。
ほとんどの場合無視されるので、あまり意味が無いです。
UTF-8 形式のファイル名を使ってる MultiPar と par2_tbb に対してはチェックを入れなくていいです。
</dd></dl>

<dl><dt><b>
ボリューム番号にファイル番号を使う
</b></dt><dd>&nbsp
標準的なリカバリ・ファイル名では「.vol」部分の数値がリカバリ・ブロック数を表してます。
ブロック数の替わりにファイル番号を使いたいなら、ここにチェックを入れてください。
ネットワーク上での輸送に使う際など、ブロック数を明示することが重要な場合は、
チェックを入れないようにしてください。
</dd></dl>

<a name="packet_repetition"></a>
<dl><dt><b>
パケットの繰り返し
</b></dt><dd>&nbsp
ここではパケットを繰り返すかどうかを指定します。
リカバリ・ファイルが複数あってパケットの損失リスクが小さいなら、
「<b>利用しない</b>」や「<b>何回までにする</b>」を選択して、
ファイル・サイズを小さくすることができます。
リカバリ・ファイルを一個しか作らない場合は、リスクが大きいので「<b>制限しない</b>」を選択するべきです。
</dd></dl>

<!--

<hr>

<h3>PAR3 の設定</h3>
<p>&nbsp
試作品の PAR 3.0 は新技術の実験目的のためにだけ使うようにしてください。 
提案書を書きながら何度もアルゴリズムやフォーマットを修正してるので、
現行品は将来の PAR 3.0 仕様と互換性がないかもしれません。
</p>

<dl><dt><b>
PAR2 互換の PAR3 ファイルを作る
</b></dt><dd>&nbsp
ここにチェックを入れると、PAR3 ファイル作成時に PAR 2.0 のパケットを追加します。
リカバリ・ファイルの拡張子を変更することで、
QuickPar などの PAR2 クライアントでもファイルの検査ができるようになります。
ただし、リカバリ・データ自体の互換性は無いので、検査はできても修復することはできません。
</dd></dl>

<dl><dt><b>
不完全修復の利用
</b></dt><dd>&nbsp
ブロック数が足りなくて通常の修復ができない場合でも、
破損部分を取り出してできるだけの修復を試みたいなら、
ここにチェックを入れてください。
ブロック数が十分な場合と違って、必ず修復できるとは限りません。
使う場合は、破損部分を取り出せる可能性を設定します。
値が低いほどより多くの破損部分を取り出そうとして遅くなり、
値が高いと確実性の高い部分だけを取り出して速くなります。
「修復後に破損ファイルを削除する」をチェックしてない時は、
不完全な修復ファイルは消失部分が 0 で埋められた状態になり、ファイル名に「<tt>.incomplete</tt>」が挿入されます。
</dd></dl>

-->

<div id="left_area">
<p><a href="index.htm">MultiPar のヘルプ</a></p>
<a href="create.htm">作成画面</a><br>
<a href="preview.htm">プレビュー画面</a><br>
<a href="creating.htm">作成中画面</a><br>
<a href="verify.htm">検査画面</a><br>
<a href="recreate.htm">作り直し画面</a><br>
<a href="option.htm">設定画面</a>
</div>

</body>
</html>
